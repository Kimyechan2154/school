# 부채널 분석

암호 알고리즘 동작시 발생하는 부채널 정보를 활용해 비밀키 찾는 법

- 비침입 공격 - 암호 알고리즘 동작 시 발생하는 부가적인 정보(소비전력, 전자파 방출 소리 계측)를 수집 분석해 비밀 정보 획득 
- 준 침입 공격 - 암호 알고리즘 동작 시 오류를 주입해 변경된 출력 값과 부가적인 정보 (레이저 주입 전자파 주입)를 수집 분석해 비밀 정보 획득

### 비침임 공격
1. SPA - 암호 알고리즘 동작하는 동안에 수집된 파형 분석(눈으로 관찰)
2. DPA - 암호 알고리즘 동작하는 동안에 수집된 파형의 **평균의 차**를 이용
3. CPA - 암호 알고리즘 동작하는 동안에 수집된 파형의 **상관관계**를 이용


Gemini의 응답
1. 부채널 분석 및 SPA (단순 전력 분석) 상세 설명

부채널 분석(Side-Channel Analysis)의 개념
암호 알고리즘의 수학적 취약점을 공격하는 것이 아니라, 암호 기기(스마트카드, IoT 기기 등)가 실제로 연산을 수행할 때 기기 밖으로 새어 나오는 '물리적인 부가 정보'를 이용해 비밀키를 찾아내는 기법입니다. 여기서 활용되는 정보가 바로 전력 소비량, 전자파, 연산 시간 등입니다.

비침입적(Non-invasive) 방식
칩의 겉면을 벗겨내거나 내부 회로를 직접 훼손하는 방식(침입형)과 다릅니다. 기기를 정상 작동시키면서 외부 전력선에 오실로스코프를 연결하거나, 칩 근처에 프로브를 대어 전자파를 측정합니다. 기기를 파괴하지 않기 때문에 공격 흔적이 남지 않습니다.

SPA (Simple Power Analysis, 단순 전력 분석)
측정된 전력 또는 전자파 파형(Trace)을 '눈으로 직접 관찰하여' 직관적으로 분석하는 가장 기본적인 전력 분석 공격입니다.

원리: 암호 알고리즘 내부에는 조건 분기문(if문 등)이 존재합니다. 데이터 비트가 0일 때와 1일 때 기기가 수행하는 명령어의 종류나 연산 시간이 달라집니다. (대표적으로 RSA의 Square and Multiply 알고리즘 연산).

분석: 연산의 종류가 다르면 전력을 소비하는 패턴(파형의 높낮이, 폭, 피크의 형태)도 명확하게 달라집니다. 분석자는 수집된 파형을 시각적으로 확인하여 특정 구간에서 어떤 연산이 일어났는지 추론하고, 이를 통해 비밀키의 비트 배열을 그대로 읽어냅니다.

2. 전력 소비 모델 (HW 및 HD) 상세 설명

부채널 공격(특히 차분 전력 분석 등)을 수행하려면, 암호 기기 내부에서 처리되는 '데이터의 값'과 실제 측정된 '전력 소비량' 사이의 상관관계를 통계적으로 연결해 줄 기준이 필요합니다. 이때 주로 사용하는 두 가지 전력 소비 모델이 HW와 HD입니다.

HW (Hamming Weight, 해밍 웨이트)

정의: 어떤 데이터의 이진(Binary) 표현에서 '1'의 개수를 의미합니다.

전력 소비와의 관계: 주로 마이크로컨트롤러의 데이터 버스나 레지스터가 0으로 초기화(Pre-charge)되어 있는 상태에서 새로운 데이터가 기록될 때 유용한 모델입니다. 데이터에 '1'이 많을수록 기기가 해당 비트들을 활성화하기 위해 더 많은 전력을 소비한다고 가정합니다.

예시: 데이터가 10110011이라면 1의 개수가 5개이므로 HW는 5입니다. 반면 00000010은 HW가 1입니다. 이 모델에 따르면 전자의 연산이 후자보다 더 높은 전력 파형을 그립니다.

HD (Hamming Distance, 해밍 디스턴스)

정의: 기기 내부의 레지스터 상태가 이전 상태(Data A)에서 새로운 상태(Data B)로 변환될 때, 상태가 변경되는(플립되는) 비트의 개수를 의미합니다.

전력 소비와의 관계: 대부분의 현대 스마트카드 및 칩은 CMOS 회로로 구성되어 있습니다. CMOS 회로는 상태가 유지될 때보다 0에서 1로, 또는 1에서 0으로 상태가 전이(Transition)될 때 전력을 크게 소비합니다. 따라서 실제 칩의 전력 소비량은 단순히 1의 개수(HW)보다는 상태 변환 횟수(HD)에 더 비례하는 경우가 많습니다.

계산 방식: 이전 데이터와 현재 데이터를 XOR 연산한 결과의 HW를 구하면 HD가 됩니다. (예: 0101에서 0110으로 변했다면 끝의 두 비트가 변경되었으므로 HD는 2입니다.)
